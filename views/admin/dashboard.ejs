<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Wear Admin Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Daterangepicker CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/adminStyle/dashboard.css">
</head>
<body data-theme="light">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand">
                    <img src="/adminStyle/images/logo.png" alt="Elite Wear Logo" class="brand-logo">
                    <h2 class="brand-name">ELITE WEAR</h2>
                </div>
                <button class="sidebar-close d-md-none">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="sidebar-user">
                <div class="user-avatar">
                    <img src="/adminStyle/images/admin-avatar.png" alt="Admin Avatar">
                    <span class="status-indicator online"></span>
                </div>
                <div class="user-info">
                    <h5 class="user-name"><%= admin.fullname %></h5>
                    <span class="user-role">Administrator</span>
                </div>
            </div>
            
            <div class="sidebar-search">
                <div class="input-group">
                    <span class="input-group-text bg-transparent border-end-0">
                        <i class="fas fa-search"></i>
                    </span>
                    <input type="text" class="form-control border-start-0" placeholder="Search...">
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h6 class="nav-section-title">MAIN</h6>
                    <ul class="nav-list">
                        <li class="nav-item active">
                            <a href="/admin/dashboard" class="nav-link">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>Dashboard</span>
                                <span class="badge bg-primary rounded-pill ms-auto">New</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-box"></i>
                                <span>Products</span>
                                <i class="fas fa-chevron-right ms-auto"></i>
                            </a>
                            <ul class="nav-submenu">
                                <li><a href="/admin/products">All Products</a></li>
                                <li><a href="/admin/products/add">Add New</a></li>
                                <li><a href="/admin/categories">Categories</a></li>
                                <li><a href="/admin/inventory">Inventory</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/orders" class="nav-link">
                                <i class="fas fa-shopping-cart"></i>
                                <span>Orders</span>
                                <% if (pendingOrdersCount > 0) { %>
                                <span class="badge bg-danger rounded-pill ms-auto"><%= pendingOrdersCount %></span>
                                <% } %>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/customers" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>Customers</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h6 class="nav-section-title">MANAGEMENT</h6>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/admin/analytics" class="nav-link">
                                <i class="fas fa-chart-line"></i>
                                <span>Analytics</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-tags"></i>
                                <span>Marketing</span>
                                <i class="fas fa-chevron-right ms-auto"></i>
                            </a>
                            <ul class="nav-submenu">
                                <li><a href="/admin/marketing/campaigns">Campaigns</a></li>
                                <li><a href="/admin/marketing/discounts">Discounts</a></li>
                                <li><a href="/admin/marketing/coupons">Coupons</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/settings" class="nav-link">
                                <i class="fas fa-cog"></i>
                                <span>Settings</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h6 class="nav-section-title">EXTRAS</h6>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/admin/help" class="nav-link">
                                <i class="fas fa-question-circle"></i>
                                <span>Help Center</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/notifications" class="nav-link">
                                <i class="fas fa-bell"></i>
                                <span>Notifications</span>
                                <% if (notificationsCount > 0) { %>
                                <span class="badge bg-warning rounded-pill ms-auto"><%= notificationsCount %></span>
                                <% } %>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="theme-switch">
                    <span class="theme-switch-label">Theme</span>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="themeSwitch">
                        <label class="form-check-label" for="themeSwitch">
                            <i class="fas fa-sun"></i>
                            <i class="fas fa-moon"></i>
                        </label>
                    </div>
                </div>
                <div class="sidebar-actions">
                    <a href="/admin/settings" class="btn btn-outline-secondary btn-sm">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                    <a href="/admin/logout" class="btn btn-danger btn-sm">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="toggle-sidebar" id="toggle-sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="breadcrumb-wrapper d-none d-md-flex">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item"><a href="/admin/dashboard">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
                            </ol>
                        </nav>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="header-actions">
                        <div class="dropdown me-3">
                            <button class="btn btn-icon" type="button" id="notificationsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-bell"></i>
                                <% if (notificationsCount > 0) { %>
                                <span class="badge bg-danger badge-pill notification-badge"><%= notificationsCount %></span>
                                <% } %>
                            </button>
                            <div class="dropdown-menu dropdown-menu-end notification-dropdown" aria-labelledby="notificationsDropdown">
                                <div class="dropdown-header d-flex justify-content-between align-items-center">
                                    <span>Notifications</span>
                                    <a href="#" class="text-muted small">Mark all as read</a>
                                </div>
                                <div class="notification-list">
                                    <% notifications.forEach(notification => { %>
                                    <a href="#" class="dropdown-item notification-item <%= notification.isRead ? '' : 'unread' %>">
                                        <div class="notification-icon <%= notification.iconBg %>">
                                            <i class="fas fa-<%= notification.icon %>"></i>
                                        </div>
                                        <div class="notification-content">
                                            <p class="mb-1"><%= notification.text %></p>
                                            <span class="text-muted small"><%= notification.timeAgo %></span>
                                        </div>
                                    </a>
                                    <% }); %>
                                </div>
                                <div class="dropdown-footer">
                                    <a href="/admin/notifications" class="text-center">View All Notifications</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dropdown me-3">
                            <button class="btn btn-icon" type="button" id="messagesDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-envelope"></i>
                                <% if (messagesCount > 0) { %>
                                <span class="badge bg-success badge-pill notification-badge"><%= messagesCount %></span>
                                <% } %>
                            </button>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="messagesDropdown">
                                <div class="dropdown-header">Messages</div>
                                <% messages.forEach(message => { %>
                                <a class="dropdown-item" href="/admin/messages/<%= message._id %>">
                                    <div class="d-flex align-items-center">
                                        <img src="<%= message.senderAvatar %>" class="rounded-circle me-2" alt="User">
                                        <div>
                                            <p class="mb-0 fw-bold"><%= message.senderName %></p>
                                            <p class="text-muted small mb-0"><%= message.preview %></p>
                                        </div>
                                    </div>
                                </a>
                                <% }); %>
                                <div class="dropdown-footer">
                                    <a href="/admin/messages" class="text-center">View All Messages</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dropdown">
                            <button class="btn user-dropdown" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="/adminStyle/images/admin-avatar.png" alt="Admin Avatar" class="user-avatar">
                                <div class="user-info d-none d-md-block">
                                    <span class="user-name"><%= admin.fullname %></span>
                                    <span class="user-role">Admin</span>
                                </div>
                                <i class="fas fa-chevron-down ms-2"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                <li><a class="dropdown-item" href="/admin/profile"><i class="fas fa-user me-2"></i> Profile</a></li>
                                <li><a class="dropdown-item" href="/admin/settings"><i class="fas fa-cog me-2"></i> Settings</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/admin/logout"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Page Header -->
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Dashboard</h1>
                        <p class="page-subtitle">Welcome back, <%= admin.fullname %>! Here's what's happening with your store today.</p>
                    </div>
                    <div class="page-actions">
                        <div class="date-filter">
                            <button class="btn btn-outline-secondary" id="dateRangeBtn">
                                <i class="fas fa-calendar-alt me-2"></i>
                                <span>Last 7 Days</span>
                                <i class="fas fa-chevron-down ms-2"></i>
                            </button>
                        </div>
                        <button class="btn btn-primary" id="exportReportBtn">
                            <i class="fas fa-download me-2"></i> Export Report
                        </button>
                    </div>
                </div>
                
                <!-- Metrics Cards -->
                <div class="row metrics-row">
                    <div class="col-md-6 col-lg-3 mb-4">
                        <div class="metric-card">
                            <div class="metric-card-body">
                                <div class="metric-icon bg-primary-light">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="metric-details">
                                    <h3 class="metric-value"><%= metrics.totalCustomers.toLocaleString() %></h3>
                                    <p class="metric-label">Total Customers</p>
                                    <div class="metric-trend <%= metrics.customersTrend >= 0 ? 'positive' : 'negative' %>">
                                        <i class="fas fa-arrow-<%= metrics.customersTrend >= 0 ? 'up' : 'down' %>"></i> 
                                        <%= Math.abs(metrics.customersTrend) %>% this month
                                    </div>
                                </div>
                            </div>
                            <div class="metric-chart">
                                <canvas id="customersChart" height="50"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-4">
                        <div class="metric-card">
                            <div class="metric-card-body">
                                <div class="metric-icon bg-success-light">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <div class="metric-details">
                                    <h3 class="metric-value"><%= metrics.totalOrders.toLocaleString() %></h3>
                                    <p class="metric-label">Total Orders</p>
                                    <div class="metric-trend <%= metrics.ordersTrend >= 0 ? 'positive' : 'negative' %>">
                                        <i class="fas fa-arrow-<%= metrics.ordersTrend >= 0 ? 'up' : 'down' %>"></i> 
                                        <%= Math.abs(metrics.ordersTrend) %>% this month
                                    </div>
                                </div>
                            </div>
                            <div class="metric-chart">
                                <canvas id="ordersChart" height="50"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-4">
                        <div class="metric-card">
                            <div class="metric-card-body">
                                <div class="metric-icon bg-info-light">
                                    <i class="fas fa-rupee-sign"></i>
                                </div>
                                <div class="metric-details">
                                    <h3 class="metric-value">₹<%= metrics.totalRevenue.toLocaleString() %></h3>
                                    <p class="metric-label">Total Revenue</p>
                                    <div class="metric-trend <%= metrics.revenueTrend >= 0 ? 'positive' : 'negative' %>">
                                        <i class="fas fa-arrow-<%= metrics.revenueTrend >= 0 ? 'up' : 'down' %>"></i> 
                                        <%= Math.abs(metrics.revenueTrend) %>% this month
                                    </div>
                                </div>
                            </div>
                            <div class="metric-chart">
                                <canvas id="revenueChart" height="50"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-4">
                        <div class="metric-card">
                            <div class="metric-card-body">
                                <div class="metric-icon bg-warning-light">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="metric-details">
                                    <h3 class="metric-value"><%= metrics.pendingOrders.toLocaleString() %></h3>
                                    <p class="metric-label">Pending Orders</p>
                                    <div class="metric-trend <%= metrics.pendingOrdersTrend >= 0 ? 'negative' : 'positive' %>">
                                        <i class="fas fa-arrow-<%= metrics.pendingOrdersTrend >= 0 ? 'up' : 'down' %>"></i> 
                                        <%= Math.abs(metrics.pendingOrdersTrend) %>% this month
                                    </div>
                                </div>
                            </div>
                            <div class="metric-chart">
                                <canvas id="pendingChart" height="50"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="row mb-4">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Sales Analytics</div>
                                <div class="card-actions">
                                    <div class="btn-group chart-filter" role="group">
                                        <button type="button" class="btn btn-sm btn-filter active" data-filter="yearly">Yearly</button>
                                        <button type="button" class="btn btn-sm btn-filter" data-filter="monthly">Monthly</button>
                                        <button type="button" class="btn btn-sm btn-filter" data-filter="weekly">Weekly</button>
                                        <button type="button" class="btn btn-sm btn-filter" data-filter="daily">Daily</button>
                                    </div>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-icon" type="button" id="chartOptionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="chartOptionsDropdown">
                                            <li><a class="dropdown-item" href="#" id="downloadChartPNG"><i class="fas fa-download me-2"></i> Download PNG</a></li>
                                            <li><a class="dropdown-item" href="#" id="downloadChartPDF"><i class="fas fa-file-pdf me-2"></i> Download PDF</a></li>
                                            <li><a class="dropdown-item" href="#" id="refreshChart"><i class="fas fa-sync me-2"></i> Refresh Data</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="salesChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <div class="card-title">Sales Progress</div>
                                <div class="card-actions">
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-icon" type="button" id="progressOptionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="progressOptionsDropdown">
                                            <li><a class="dropdown-item" href="#"><i class="fas fa-eye me-2"></i> View Details</a></li>
                                            <li><a class="dropdown-item" href="#"><i class="fas fa-sync me-2"></i> Refresh</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="progress-circle-container">
                                    <canvas id="progressChart" width="200" height="200"></canvas>
                                    <div class="progress-text">
                                        <h2 class="progress-percentage"><%= metrics.salesProgress.toFixed(2) %>%</h2>
                                        <p class="progress-label"><%= metrics.salesProgressTrend >= 0 ? '+' : '-' %><%= Math.abs(metrics.salesProgressTrend) %>% from last quarter</p>
                                    </div>
                                </div>
                                <div class="progress-details mt-4">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="progress-item">
                                                <p class="progress-item-label">Target</p>
                                                <h5 class="progress-item-value text-<%= metrics.targetStatus %>">₹<%= metrics.target.toLocaleString() %> <i class="fas fa-arrow-<%= metrics.targetTrend >= 0 ? 'up' : 'down' %> small"></i></h5>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="progress-item">
                                                <p class="progress-item-label">Revenue</p>
                                                <h5 class="progress-item-value text-<%= metrics.revenueStatus %>">₹<%= metrics.currentRevenue.toLocaleString() %> <i class="fas fa-arrow-<%= metrics.currentRevenueTrend >= 0 ? 'up' : 'down' %> small"></i></h5>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="progress-item">
                                                <p class="progress-item-label">Today</p>
                                                <h5 class="progress-item-value text-<%= metrics.todayStatus %>">₹<%= metrics.todayRevenue.toLocaleString() %> <i class="fas fa-arrow-<%= metrics.todayRevenueTrend >= 0 ? 'up' : 'down' %> small"></i></h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <p class="text-center">You succeeded in earning ₹<%= metrics.todayRevenue.toLocaleString() %> today, <%= metrics.todayRevenueTrend >= 0 ? 'higher' : 'lower' %> than yesterday</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top 10 Lists Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Top Performers</div>
                                <div class="card-actions">
                                    <ul class="nav nav-tabs card-tabs" id="topListsTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab" aria-controls="products" aria-selected="true">Products</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="categories-tab" data-bs-toggle="tab" data-bs-target="#categories" type="button" role="tab" aria-controls="categories" aria-selected="false">Categories</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="brands-tab" data-bs-toggle="tab" data-bs-target="#brands" type="button" role="tab" aria-controls="brands" aria-selected="false">Brands</button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="tab-content" id="topListsTabContent">
                                    <div class="tab-pane fade show active" id="products" role="tabpanel" aria-labelledby="products-tab">
                                        <div class="table-responsive">
                                            <table class="table table-hover datatable" id="productsTable">
                                                <thead>
                                                    <tr>
                                                        <th>Rank</th>
                                                        <th>Product</th>
                                                        <th>Category</th>
                                                        <th>Price</th>
                                                        <th>Sales</th>
                                                        <th>Revenue</th>
                                                        <th>Stock</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% topProducts.forEach((product, index) => { %>
                                                    <tr>
                                                        <td><%= index + 1 %></td>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <img src="<%= product.image %>" alt="<%= product.name %>" class="product-img me-2">
                                                                <div>
                                                                    <p class="mb-0 fw-medium"><%= product.name %></p>
                                                                    <small class="text-muted">#<%= product.sku || 'PRD-' + product._id.toString().slice(-4) %></small>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><%= product.category %></td>
                                                        <td>₹<%= product.price.toLocaleString() %></td>
                                                        <td><%= product.sales %></td>
                                                        <td>₹<%= product.revenue.toLocaleString() %></td>
                                                        <td><%= product.stock %></td>
                                                        <td><span class="badge bg-<%= product.stock > 20 ? 'success' : 'warning' %>"><%= product.stock > 20 ? 'In Stock' : 'Low Stock' %></span></td>
                                                    </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="categories" role="tabpanel" aria-labelledby="categories-tab">
                                        <div class="table-responsive">
                                            <table class="table table-hover datatable" id="categoriesTable">
                                                <thead>
                                                    <tr>
                                                        <th>Rank</th>
                                                        <th>Category</th>
                                                        <th>Products</th>
                                                        <th>Total Sales</th>
                                                        <th>Revenue</th>
                                                        <th>Growth</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% topCategories.forEach((category, index) => { %>
                                                    <tr>
                                                        <td><%= index + 1 %></td>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <img src="<%= category.image %>" alt="<%= category.name %>" class="product-img me-2">
                                                                <div>
                                                                    <p class="mb-0 fw-medium"><%= category.name %></p>
                                                                    <small class="text-muted">#CAT-<%= category._id.toString().slice(-3) %></small>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><%= category.productsCount %></td>
                                                        <td><%= category.sales %></td>
                                                        <td>₹<%= category.revenue.toLocaleString() %></td>
                                                        <td><span class="text-<%= category.growth >= 0 ? 'success' : 'danger' %>"><%= category.growth >= 0 ? '+' : '' %><%= category.growth %>%</span></td>
                                                        <td><span class="badge bg-<%= category.isListed ? 'success' : 'danger' %>"><%= category.isListed ? 'Active' : 'Inactive' %></span></td>
                                                    </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="brands" role="tabpanel" aria-labelledby="brands-tab">
                                        <div class="table-responsive">
                                            <table class="table table-hover datatable" id="brandsTable">
                                                <thead>
                                                    <tr>
                                                        <th>Rank</th>
                                                        <th>Brand</th>
                                                        <th>Products</th>
                                                        <th>Total Sales</th>
                                                        <th>Revenue</th>
                                                        <th>Growth</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% topBrands.forEach((brand, index) => { %>
                                                    <tr>
                                                        <td><%= index + 1 %></td>
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <img src="<%= brand.image %>" alt="<%= brand.name %>" class="product-img me-2">
                                                                <div>
                                                                    <p class="mb-0 fw-medium"><%= brand.name %></p>
                                                                    <small class="text-muted">#BRD-<%= (index + 1).toString().padStart(3, '0') %></small>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><%= brand.productsCount %></td>
                                                        <td><%= brand.sales %></td>
                                                        <td>₹<%= brand.revenue.toLocaleString() %></td>
                                                        <td><span class="text-<%= brand.growth >= 0 ? 'success' : 'danger' %>"><%= brand.growth >= 0 ? '+' : '' %><%= brand.growth %>%</span></td>
                                                        <td><span class="badge bg-success">Active</span></td>
                                                    </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ledger Book Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Ledger Book</div>
                                <div class="card-actions">
                                    <div class="input-group me-2 d-none d-md-flex" style="width: 250px;">
                                        <input type="text" class="form-control" placeholder="Search transactions...">
                                        <button class="btn btn-outline-secondary" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <button class="btn btn-sm btn-primary me-2" data-bs-toggle="modal" data-bs-target="#newEntryModal">
                                        <i class="fas fa-plus me-1"></i> New Entry
                                    </button>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="exportDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fas fa-download me-1"></i> Export
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="exportDropdown">
                                            <li><a class="dropdown-item" href="/admin/ledger/export/csv"><i class="fas fa-file-csv me-2"></i> CSV</a></li>
                                            <li><a class="dropdown-item" href="/admin/ledger/export/excel"><i class="fas fa-file-excel me-2"></i> Excel</a></li>
                                            <li><a class="dropdown-item" href="/admin/ledger/export/pdf"><i class="fas fa-file-pdf me-2"></i> PDF</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover datatable" id="ledgerTable">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Transaction ID</th>
                                                <th>Description</th>
                                                <th>Category</th>
                                                <th>Debit (₹)</th>
                                                <th>Credit (₹)</th>
                                                <th>Balance (₹)</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% ledgerEntries.forEach(entry => { %>
                                            <tr>
                                                <td><%= new Date(entry.date).toISOString().split('T')[0] %></td>
                                                <td><%= entry.transactionId %></td>
                                                <td><%= entry.description %></td>
                                                <td><span class="badge bg-<%= entry.category === 'Income' ? 'success' : 'danger' %>"><%= entry.category %></span></td>
                                                <td><%= entry.debit ? entry.debit.toLocaleString() : '-' %></td>
                                                <td><%= entry.credit ? entry.credit.toLocaleString() : '-' %></td>
                                                <td><%= entry.balance.toLocaleString() %></td>
                                                <td>
                                                    <div class="d-flex">
                                                        <a href="/admin/ledger/edit/<%= entry._id %>" class="btn btn-sm btn-icon btn-outline-primary me-1" title="Edit">
                                                            <i class="fas fa-edit"></i>
                                                        </a>
                                                        <button class="btn btn-sm btn-icon btn-outline-danger delete-entry" data-id="<%= entry._id %>" title="Delete">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <% }); %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <nav aria-label="Ledger pagination">
                                    <ul class="pagination justify-content-end mb-0">
                                        <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
                                            <a class="page-link" href="/admin/dashboard?ledgerPage=<%= currentPage - 1 %>" tabindex="-1" aria-disabled="<%= currentPage === 1 ? 'true' : 'false' %>">Previous</a>
                                        </li>
                                        <% for(let i = 1; i <= totalPages; i++) { %>
                                        <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                                            <a class="page-link" href="/admin/dashboard?ledgerPage=<%= i %>"><%= i %></a>
                                        </li>
                                        <% } %>
                                        <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
                                            <a class="page-link" href="/admin/dashboard?ledgerPage=<%= currentPage + 1 %>">Next</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- New Entry Modal -->
    <div class="modal fade" id="newEntryModal" tabindex="-1" aria-labelledby="newEntryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newEntryModalLabel">Add New Ledger Entry</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="ledgerEntryForm" action="/admin/ledger/add" method="POST">
                        <div class="mb-3">
                            <label for="transactionDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="transactionDate" name="date" required>
                        </div>
                        <div class="mb-3">
                            <label for="transactionDescription" class="form-label">Description</label>
                            <input type="text" class="form-control" id="transactionDescription" name="description" placeholder="Enter description" required>
                        </div>
                        <div class="mb-3">
                            <label for="transactionCategory" class="form-label">Category</label>
                            <select class="form-select" id="transactionCategory" name="category" required>
                                <option value="" selected disabled>Select category</option>
                                <option value="Income">Income</option>
                                <option value="Expenses">Expenses</option>
                                <option value="Investment">Investment</option>
                                <option value="Transfer">Transfer</option>
                            </select>
                        </div>
                        <div class="row mb-3">
                            <div class="col-6">
                                <label for="transactionDebit" class="form-label">Debit (₹)</label>
                                <input type="number" class="form-control" id="transactionDebit" name="debit" placeholder="0.00">
                            </div>
                            <div class="col-6">
                                <label for="transactionCredit" class="form-label">Credit (₹)</label>
                                <input type="number" class="form-control" id="transactionCredit" name="credit" placeholder="0.00">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="transactionNotes" class="form-label">Notes</label>
                            <textarea class="form-control" id="transactionNotes" name="notes" rows="3" placeholder="Additional notes"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="ledgerEntryForm" class="btn btn-primary">Save Entry</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Theme Switcher -->
    <div class="theme-switcher" id="themeSwitcher">
        <i class="fas fa-moon"></i>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
    <!-- Select2 -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- Moment.js -->
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <!-- Daterangepicker -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <!-- Custom JS -->
    <script src="/adminStyle/js/dashboard.js"></script>
    
    <script>
        // Initialize DataTables
        $(document).ready(function() {
            $('#productsTable').DataTable({
                responsive: true,
                pageLength: 10,
                language: {
                    search: "",
                    searchPlaceholder: "Search products..."
                }
            });
            
            $('#categoriesTable').DataTable({
                responsive: true,
                pageLength: 10,
                language: {
                    search: "",
                    searchPlaceholder: "Search categories..."
                }
            });
            
            $('#brandsTable').DataTable({
                responsive: true,
                pageLength: 10,
                language: {
                    search: "",
                    searchPlaceholder: "Search brands..."
                }
            });
            
            $('#ledgerTable').DataTable({
                responsive: true,
                pageLength: 5,
                language: {
                    search: "",
                    searchPlaceholder: "Search transactions..."
                }
            });
            
            // Initialize Select2
            $('.form-select').select2({
                theme: 'bootstrap-5',
                dropdownParent: $('#newEntryModal')
            });
            
            // Initialize Daterangepicker
            $('#dateRangeBtn').daterangepicker({
                ranges: {
                    'Today': [moment(), moment()],
                    'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                    'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                    'This Month': [moment().startOf('month'), moment().endOf('month')],
                    'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                },
                startDate: moment().subtract(6, 'days'),
                endDate: moment()
            }, function(start, end, label) {
                $('#dateRangeBtn span').html(label);
                // Update dashboard data based on selected date range
                window.location.href = `/admin/dashboard?startDate=${start.format('YYYY-MM-DD')}&endDate=${end.format('YYYY-MM-DD')}`;
            });
            
            // Delete ledger entry confirmation
            $('.delete-entry').on('click', function() {
                const entryId = $(this).data('id');
                if (confirm('Are you sure you want to delete this entry?')) {
                    window.location.href = `/admin/ledger/delete/${entryId}`;
                }
            });
            
            // Export report button
            $('#exportReportBtn').on('click', function() {
                const startDate = $('#dateRangeBtn').data('daterangepicker').startDate.format('YYYY-MM-DD');
                const endDate = $('#dateRangeBtn').data('daterangepicker').endDate.format('YYYY-MM-DD');
                window.location.href = `/admin/dashboard/export?startDate=${startDate}&endDate=${endDate}`;
            });
            
            // Initialize charts
            initCharts();
            
            // Theme switcher
            $('#themeSwitcher, #themeSwitch').on('click', function() {
                const body = document.body;
                const isDarkTheme = body.getAttribute('data-theme') === 'dark';
                
                body.setAttribute('data-theme', isDarkTheme ? 'light' : 'dark');
                localStorage.setItem('theme', isDarkTheme ? 'light' : 'dark');
                
                // Update icon
                if (isDarkTheme) {
                    $('#themeSwitcher i').removeClass('fa-sun').addClass('fa-moon');
                } else {
                    $('#themeSwitcher i').removeClass('fa-moon').addClass('fa-sun');
                }
            });
            
            // Check for saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
                if (savedTheme === 'dark') {
                    $('#themeSwitcher i').removeClass('fa-moon').addClass('fa-sun');
                    $('#themeSwitch').prop('checked', true);
                }
            }
            
            // Toggle sidebar on mobile
            $('#toggle-sidebar, .sidebar-close').on('click', function() {
                $('.sidebar').toggleClass('active');
            });
            
            // Toggle submenu
            $('.nav-link').on('click', function(e) {
                const submenu = $(this).siblings('.nav-submenu');
                if (submenu.length) {
                    e.preventDefault();
                    $(this).parent().toggleClass('active');
                }
            });
        });
        
        // Initialize charts
        function initCharts() {
            // Sales Chart
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                const salesData = <%- JSON.stringify(chartData.sales) %>;
                new Chart(salesCtx, {
                    type: 'bar',
                    data: {
                        labels: salesData.labels,
                        datasets: [{
                            label: 'Sales',
                            data: salesData.data,
                            backgroundColor: 'rgba(67, 97, 238, 0.6)',
                            borderColor: 'rgba(67, 97, 238, 1)',
                            borderWidth: 1,
                            borderRadius: 5,
                            barThickness: 'flex',
                            maxBarThickness: 25
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.7)',
                                padding: 10,
                                titleFont: {
                                    size: 14
                                },
                                bodyFont: {
                                    size: 13
                                },
                                callbacks: {
                                    label: function(context) {
                                        return `₹${context.parsed.y.toLocaleString()}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value >= 1000 ? `${value/1000}k` : value;
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }
            
            // Progress Chart
            const progressCtx = document.getElementById('progressChart');
            if (progressCtx) {
                new Chart(progressCtx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [<%= metrics.salesProgress %>, <%= 100 - metrics.salesProgress %>],
                            backgroundColor: [
                                'rgba(67, 97, 238, 0.8)',
                                'rgba(240, 240, 240, 0.5)'
                            ],
                            borderWidth: 0,
                            cutout: '80%'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    }
                });
            }
            
            // Mini Charts
            const miniCharts = [
                { id: 'customersChart', data: <%- JSON.stringify(chartData.customers) %>, color: 'rgba(67, 97, 238, 1)', bgColor: 'rgba(67, 97, 238, 0.2)' },
                { id: 'ordersChart', data: <%- JSON.stringify(chartData.orders) %>, color: 'rgba(25, 135, 84, 1)', bgColor: 'rgba(25, 135, 84, 0.2)' },
                { id: 'revenueChart', data: <%- JSON.stringify(chartData.revenue) %>, color: 'rgba(13, 110, 253, 1)', bgColor: 'rgba(13, 110, 253, 0.2)' },
                { id: 'pendingChart', data: <%- JSON.stringify(chartData.pending) %>, color: 'rgba(253, 126, 20, 1)', bgColor: 'rgba(253, 126, 20, 0.2)' }
            ];
            
            miniCharts.forEach(chart => {
                const ctx = document.getElementById(chart.id);
                if (ctx) {
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: chart.data.labels,
                            datasets: [{
                                data: chart.data.data,
                                backgroundColor: chart.bgColor,
                                borderColor: chart.color,
                                borderWidth: 2,
                                pointRadius: 0,
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    enabled: false
                                }
                            },
                            scales: {
                                x: {
                                    display: false
                                },
                                y: {
                                    display: false
                                }
                            }
                        }
                    });
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
    // Toggle sidebar on mobile
    const toggleBtn = document.getElementById('toggle-sidebar');
    const sidebar = document.getElementById('sidebar');
    const sidebarClose = document.querySelector('.sidebar-close');
    
    if (toggleBtn && sidebar) {
        toggleBtn.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
    }
    
    if (sidebarClose) {
        sidebarClose.addEventListener('click', function() {
            sidebar.classList.remove('active');
        });
    }
    
    // Initialize submenu toggles
    initSubmenuToggles();
    
    // Initialize theme switcher
    initThemeSwitcher();
    
    // Initialize chart download buttons
    initChartDownloads();
    
    // Initialize form validation
    initFormValidation();
});

// Initialize submenu toggles
function initSubmenuToggles() {
    const navItems = document.querySelectorAll('.nav-item');
    
    navItems.forEach(item => {
        const link = item.querySelector('.nav-link');
        const submenu = item.querySelector('.nav-submenu');
        
        if (link && submenu) {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                item.classList.toggle('active');
                
                // Close other open submenus
                navItems.forEach(otherItem => {
                    if (otherItem !== item && otherItem.classList.contains('active')) {
                        otherItem.classList.remove('active');
                    }
                });
            });
        }
    });
}

// Initialize theme switcher
function initThemeSwitcher() {
    const themeSwitcher = document.getElementById('themeSwitcher');
    const themeSwitch = document.getElementById('themeSwitch');
    
    if (themeSwitcher) {
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme');
        
        // Apply saved theme
        if (savedTheme) {
            document.body.setAttribute('data-theme', savedTheme);
            if (savedTheme === 'dark' && themeSwitch) {
                themeSwitch.checked = true;
                themeSwitcher.innerHTML = '<i class="fas fa-sun"></i>';
            }
        }
        
        // Toggle theme on click
        themeSwitcher.addEventListener('click', function() {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update icon
            themeSwitcher.innerHTML = newTheme === 'dark' 
                ? '<i class="fas fa-sun"></i>' 
                : '<i class="fas fa-moon"></i>';
                
            // Update switch if it exists
            if (themeSwitch) {
                themeSwitch.checked = newTheme === 'dark';
            }
        });
    }
    
    if (themeSwitch) {
        themeSwitch.addEventListener('change', function() {
            const newTheme = this.checked ? 'dark' : 'light';
            
            document.body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update icon on theme switcher button
            if (themeSwitcher) {
                themeSwitcher.innerHTML = newTheme === 'dark' 
                    ? '<i class="fas fa-sun"></i>' 
                    : '<i class="fas fa-moon"></i>';
            }
        });
    }
}

// Initialize chart download buttons
function initChartDownloads() {
    const downloadPNG = document.getElementById('downloadChartPNG');
    const downloadPDF = document.getElementById('downloadChartPDF');
    const refreshChart = document.getElementById('refreshChart');
    
    if (downloadPNG) {
        downloadPNG.addEventListener('click', function(e) {
            e.preventDefault();
            const salesChart = document.getElementById('salesChart');
            if (salesChart && window.Chart) {
                const chartInstance = Chart.getChart(salesChart);
                if (chartInstance) {
                    const link = document.createElement('a');
                    link.download = 'sales-chart.png';
                    link.href = chartInstance.toBase64Image();
                    link.click();
                }
            }
        });
    }
    
    if (downloadPDF) {
        downloadPDF.addEventListener('click', function(e) {
            e.preventDefault();
            alert('PDF download functionality would be implemented with a PDF generation library');
        });
    }
    
    if (refreshChart) {
        refreshChart.addEventListener('click', function(e) {
            e.preventDefault();
            const salesChart = document.getElementById('salesChart');
            if (salesChart && window.Chart) {
                const chartInstance = Chart.getChart(salesChart);
                if (chartInstance) {
                    // Simulate data refresh
                    const currentData = [...chartInstance.data.datasets[0].data];
                    const newData = currentData.map(value => {
                        const change = Math.floor(Math.random() * 20) - 10; // Random change between -10 and +10
                        return Math.max(0, value + change); // Ensure value doesn't go below 0
                    });
                    
                    chartInstance.data.datasets[0].data = newData;
                    chartInstance.update();
                    
                    // Show toast notification
                    showToast('Chart data refreshed successfully!', 'success');
                }
            }
        });
    }
}

// Initialize form validation
function initFormValidation() {
    const ledgerForm = document.getElementById('ledgerEntryForm');
    
    if (ledgerForm) {
        ledgerForm.addEventListener('submit', function(e) {
            if (!this.checkValidity()) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            const debit = document.getElementById('transactionDebit');
            const credit = document.getElementById('transactionCredit');
            
            if (debit && credit) {
                if ((debit.value && credit.value) || (!debit.value && !credit.value)) {
                    e.preventDefault();
                    alert('Please provide either debit or credit amount, not both or none.');
                }
            }
        });
    }
}

// Show toast notification
function showToast(message, type = 'info') {
    // Check if toast container exists, if not create it
    let toastContainer = document.querySelector('.toast-container');
    if (!toastContainer) {
        toastContainer = document.createElement('div');
        toastContainer.className = 'toast-container position-fixed bottom-0 end-0 p-3';
        document.body.appendChild(toastContainer);
    }
    
    // Create toast element
    const toastId = 'toast-' + Date.now();
    const toast = document.createElement('div');
    toast.className = `toast align-items-center text-white bg-${type} border-0`;
    toast.id = toastId;
    toast.setAttribute('role', 'alert');
    toast.setAttribute('aria-live', 'assertive');
    toast.setAttribute('aria-atomic', 'true');
    
    toast.innerHTML = `
        <div class="d-flex">
            <div class="toast-body">
                ${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    `;
    
    // Add toast to container
    toastContainer.appendChild(toast);
    
    // Initialize and show toast
    if (typeof bootstrap !== 'undefined') {
        const bsToast = new bootstrap.Toast(toast, {
            autohide: true,
            delay: 3000
        });
        bsToast.show();
        
        // Remove toast after it's hidden
        toast.addEventListener('hidden.bs.toast', function() {
            toast.remove();
        });
    }
}

// Filter buttons for chart
document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.btn-filter');
    
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove active class from all buttons in the same group
            const group = this.closest('.chart-filter');
            if (group) {
                group.querySelectorAll('.btn-filter').forEach(btn => {
                    btn.classList.remove('active');
                });
            }
            
            // Add active class to clicked button
            this.classList.add('active');
            
            // Get filter type
            const filterType = this.getAttribute('data-filter');
            
            // Update chart data based on filter type
            updateChartData(filterType);
        });
    });
});

// Update chart data based on filter
function updateChartData(filterType) {
    const salesChart = document.getElementById('salesChart');
    if (!salesChart || !window.Chart) return;
    
    const chartInstance = Chart.getChart(salesChart);
    if (!chartInstance) return;
    
    // Example data for different time periods
    const chartData = {
        yearly: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            data: [65, 85, 80, 120, 150, 110, 90, 70, 85, 120, 130, 170]
        },
        monthly: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            data: [42, 55, 48, 60]
        },
        weekly: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            data: [12, 19, 15, 17, 22, 24, 18]
        },
        daily: {
            labels: ['12AM', '4AM', '8AM', '12PM', '4PM', '8PM'],
            data: [5, 3, 8, 15, 12, 7]
        }
    };
    
    // Update chart data
    chartInstance.data.labels = chartData[filterType].labels;
    chartInstance.data.datasets[0].data = chartData[filterType].data;
    
    // Update chart type based on filter
    if (filterType === 'yearly' || filterType === 'monthly') {
        chartInstance.config.type = 'bar';
        chartInstance.data.datasets[0].backgroundColor = 'rgba(67, 97, 238, 0.6)';
        chartInstance.data.datasets[0].borderColor = 'rgba(67, 97, 238, 1)';
        chartInstance.data.datasets[0].borderRadius = 5;
        chartInstance.data.datasets[0].tension = undefined;
        chartInstance.data.datasets[0].fill = undefined;
    } else {
        chartInstance.config.type = 'line';
        chartInstance.data.datasets[0].backgroundColor = 'rgba(67, 97, 238, 0.2)';
        chartInstance.data.datasets[0].borderColor = 'rgba(67, 97, 238, 1)';
        chartInstance.data.datasets[0].tension = 0.4;
        chartInstance.data.datasets[0].fill = true;
    }
    
    // Update chart
    chartInstance.update();
    
    // Show toast notification
    showToast(`Chart updated to show ${filterType} data`, 'info');
}
    </script>
</body>
</html>