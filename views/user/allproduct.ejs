<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elite Wear - Premium Collection</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- AOS Animation Library -->
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/userStyle/header.css">
  <link rel="stylesheet" href="/userStyle/footer.css">
  <style>
    :root {
      --primary-color: #0f172a;
      --secondary-color: #f8fafc;
      --accent-color: #3b82f6;
      --accent-hover: #2563eb;
      --accent-secondary: #8b5cf6;
      --accent-tertiary: #ec4899;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --text-light: #94a3b8;
      --border-color: #e2e8f0;
      --card-bg: #ffffff;
      --sidebar-bg: #ffffff;
      --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05);
      --card-hover-shadow: 0 20px 35px -10px rgba(0, 0, 0, 0.1);
      --gradient-primary: linear-gradient(135deg, #3b82f6, #8b5cf6);
      --gradient-secondary: linear-gradient(135deg, #8b5cf6, #ec4899);
      --gradient-accent: linear-gradient(135deg, #3b82f6, #10b981);
      --success-color: #10b981;
      --error-color: #ef4444;
      --warning-color: #f59e0b;
      --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      --border-radius-sm: 0.375rem;
      --border-radius: 0.5rem;
      --border-radius-lg: 0.75rem;
      --border-radius-xl: 1rem;
      --border-radius-full: 9999px;
      --font-primary: 'Outfit', sans-serif;
      --font-secondary: 'Playfair Display', serif;
    }

    /* Dark mode variables */
    .dark-mode {
      --primary-color: #f8fafc;
      --secondary-color: #0f172a;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-light: #94a3b8;
      --border-color: #334155;
      --card-bg: #1e293b;
      --sidebar-bg: #0f172a;
      --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
      --card-hover-shadow: 0 20px 35px -10px rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-primary);
      color: var(--text-primary);
      background-color: var(--secondary-color);
      overflow-x: hidden;
      transition: background-color var(--transition-normal), color var(--transition-normal);
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: var(--secondary-color);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--text-light);
      border-radius: var(--border-radius-full);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-secondary);
    }

    /* Scroll Indicator */
    .scroll-indicator {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: var(--gradient-primary);
      z-index: 9999;
      width: 0%;
      transition: width 0.1s ease;
    }

    /* Cursor Glow Effect */
    .cursor-glow {
      position: fixed;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--accent-color);
      pointer-events: none;
      mix-blend-mode: difference;
      z-index: 9999;
      transform: translate(-50%, -50%);
      opacity: 0.5;
      transition: width 0.3s, height 0.3s, opacity 0.3s;
    }

    /* Preloader */
    .preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--primary-color);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .preloader.fade-out {
      opacity: 0;
      visibility: hidden;
    }

    .loader {
      width: 80px;
      height: 80px;
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top-color: var(--accent-color);
      animation: spin 1s linear infinite;
      position: relative;
    }

    .loader::before {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      border: 4px solid transparent;
      border-top-color: var(--accent-secondary);
      border-radius: 50%;
      animation: spin 2s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    /* Hero Section */
    .hero-section {
      position: relative;
      height: 50vh;
      min-height: 400px;
      max-height: 600px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
      color: white;
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.5;
      z-index: 1;
    }

    .hero-section::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
      z-index: 2;
    }

    .hero-content {
      position: relative;
      z-index: 3;
      text-align: center;
      max-width: 800px;
      padding: 0 2rem;
    }

    .hero-title {
      font-family: var(--font-secondary);
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: fadeInUp 1s ease-out;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      font-weight: 400;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
      animation: fadeInUp 1s ease-out 0.2s both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Breadcrumb */
    .custom-breadcrumb {
      padding: 1rem 0;
      margin-bottom: 2rem;
      border-bottom: 1px solid var(--border-color);
    }

    .breadcrumb {
      margin-bottom: 0;
      padding: 0;
    }

    .breadcrumb-item a {
      color: var(--text-secondary);
      transition: color var(--transition-fast);
    }

    .breadcrumb-item a:hover {
      color: var(--accent-color);
    }

    .breadcrumb-item.active {
      color: var(--text-primary);
    }

    .breadcrumb-item + .breadcrumb-item::before {
      content: '/';
      color: var(--text-light);
    }

    /* Filter Sidebar */
    .filter-sidebar {
      background-color: var(--card-bg);
      border-radius: var(--border-radius-lg);
      padding: 1.5rem;
      box-shadow: var(--card-shadow);
      position: sticky;
      top: 2rem;
      height: fit-content;
      transition: all var(--transition-normal);
    }

    .filter-sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--gradient-primary);
      border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
      transition: height var(--transition-normal);
    }

    .filter-sidebar:hover::before {
      height: 8px;
    }

    .filter-toggle-btn {
      background: var(--gradient-primary);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      padding: 0.75rem 1rem;
      font-weight: 500;
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    .filter-toggle-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-secondary);
      z-index: -1;
      opacity: 0;
      transition: opacity var(--transition-normal);
    }

    .filter-toggle-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
    }

    .filter-toggle-btn:hover::before {
      opacity: 1;
    }

    .filter-title {
      font-size: 1.25rem;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.75rem;
      font-weight: 600;
    }

    .filter-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: var(--gradient-primary);
      border-radius: var(--border-radius-full);
      transition: width var(--transition-normal);
    }

    .filter-title:hover::after {
      width: 100px;
    }

    .filter-group {
      margin-bottom: 1.5rem;
    }

    .filter-label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.75rem;
      color: var(--text-primary);
    }

    .form-select {
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
      color: var(--text-primary);
      background-color: var(--card-bg);
      transition: all var(--transition-normal);
    }

    .form-select:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      outline: none;
    }

    .size-options {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .size-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      background-color: var(--card-bg);
      color: var(--text-primary);
      font-weight: 500;
      transition: all var(--transition-normal);
      cursor: pointer;
    }

    .size-btn:hover {
      border-color: var(--accent-color);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.1);
    }

    .size-btn.active {
      background: var(--gradient-primary);
      color: white;
      border-color: transparent;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
    }

    .price-inputs {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .price-input {
      flex: 1;
    }

    .price-divider {
      color: var(--text-light);
    }

    .form-control {
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
      color: var(--text-primary);
      background-color: var(--card-bg);
      transition: all var(--transition-normal);
    }

    .form-control:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      outline: none;
    }

    .filter-actions {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 2rem;
    }

    .btn-shop-now {
      background: var(--gradient-primary);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    .btn-shop-now::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-secondary);
      z-index: -1;
      opacity: 0;
      transition: opacity var(--transition-normal);
    }

    .btn-shop-now:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
    }

    .btn-shop-now:hover::before {
      opacity: 1;
    }

    .btn-reset {
      background-color: transparent;
      color: var(--text-secondary);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      transition: all var(--transition-normal);
    }

    .btn-reset:hover {
      background-color: var(--border-color);
      color: var(--text-primary);
      transform: translateY(-3px);
    }

    /* Products Container */
    .products-container {
      transition: all var(--transition-normal);
    }

    .products-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
      background-color: var(--card-bg);
      border-radius: var(--border-radius-lg);
      padding: 1.5rem;
      box-shadow: var(--card-shadow);
      position: relative;
      overflow: hidden;
    }

    .products-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--gradient-secondary);
      transition: height var(--transition-normal);
    }

    .products-header:hover::before {
      height: 8px;
    }

    .products-count h4 {
      margin-bottom: 0;
      font-size: 1.25rem;
      font-weight: 600;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-fill-color: transparent;
    }

    .products-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .search-container {
      position: relative;
    }

    .search-form {
      display: flex;
      align-items: center;
    }

    .search-input {
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-full);
      padding: 0.75rem 1rem;
      padding-right: 3rem;
      font-size: 0.95rem;
      color: var(--text-primary);
      background-color: var(--card-bg);
      transition: all var(--transition-normal);
      width: 250px;
    }

    .search-input:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      width: 300px;
      outline: none;
    }

    .search-button {
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-secondary);
      font-size: 1rem;
      padding: 0.5rem;
      transition: all var(--transition-normal);
      cursor: pointer;
    }

    .search-button:hover {
      color: var(--accent-color);
      transform: translateY(-50%) scale(1.1);
    }

    /* Product Card */
    .product-card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius-lg);
      overflow: hidden;
      box-shadow: var(--card-shadow);
      transition: all var(--transition-normal);
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .product-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--card-hover-shadow);
    }

    .product-image-link {
      position: relative;
      overflow: hidden;
      display: block;
      padding-top: 125%; /* 4:5 aspect ratio */
    }

    .product-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-normal);
    }

    .product-card:hover .product-image {
      transform: scale(1.05);
    }

    .product-badge {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: var(--gradient-primary);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius-full);
      font-size: 0.8rem;
      font-weight: 600;
      z-index: 2;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .product-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity var(--transition-normal);
      z-index: 1;
    }

    .product-card:hover .product-overlay {
      opacity: 1;
    }

    .quick-view {
      background-color: white;
      color: var(--text-primary);
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius-full);
      font-weight: 500;
      transform: translateY(20px);
      transition: all var(--transition-normal);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }

    .product-card:hover .quick-view {
      transform: translateY(0);
    }

    .quick-view:hover {
      background: var(--gradient-primary);
      color: white;
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    .wishlist-icon {
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 3;
      width: 40px;
      height: 40px;
      background-color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all var(--transition-normal);
    }

    .wishlist-icon:hover {
      transform: scale(1.1) translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .wishlist-heart {
      width: 24px;
      height: 24px;
      fill: none;
      stroke: var(--text-secondary);
      stroke-width: 2;
      transition: all var(--transition-normal);
    }

    .wishlist-heart:hover {
      stroke: var(--accent-color);
    }

    .heart.active {
      fill: var(--accent-color);
      stroke: var(--accent-color);
    }

    .product-info {
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    .product-name {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      transition: color var(--transition-normal);
    }

    .product-card:hover .product-name {
      color: var(--accent-color);
    }

    .product-price-rating {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .product-pricing {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .product-price {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--accent-color);
    }

    .product-original-price {
      font-size: 0.9rem;
      color: var(--text-light);
      text-decoration: line-through;
    }

    .product-rating {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      color: var(--warning-color);
      font-size: 0.9rem;
    }

    .rating-count {
      color: var(--text-light);
      margin-left: 0.25rem;
    }

    .btn-view-product {
      margin-top: auto;
      display: inline-block;
      text-align: center;
      padding: 0.75rem 1.5rem;
      background-color: transparent;
      color: var(--accent-color);
      border: 1px solid var(--accent-color);
      border-radius: var(--border-radius);
      font-weight: 500;
      transition: all var(--transition-normal);
      text-decoration: none;
    }

    .btn-view-product:hover {
      background-color: var(--accent-color);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }

    /* No Products */
    .no-products {
      background-color: var(--card-bg);
      border-radius: var(--border-radius-lg);
      padding: 3rem 2rem;
      text-align: center;
      box-shadow: var(--card-shadow);
    }

    .no-products-icon {
      font-size: 3rem;
      color: var(--text-light);
      margin-bottom: 1.5rem;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
      100% {
        transform: translateY(0);
      }
    }

    .no-products h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .no-products p {
      color: var(--text-secondary);
      margin-bottom: 1.5rem;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Pagination */
    .pagination-container {
      margin-top: 3rem;
      display: flex;
      justify-content: center;
    }

    .pagination {
      display: flex;
      gap: 0.5rem;
    }

    .page-item {
      list-style: none;
    }

    .page-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: var(--border-radius);
      background-color: var(--card-bg);
      color: var(--text-primary);
      font-weight: 500;
      transition: all var(--transition-normal);
      box-shadow: var(--card-shadow);
      text-decoration: none;
    }

    .page-link:hover {
      background-color: var(--accent-color);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }

    .page-item.active .page-link {
      background: var(--gradient-primary);
      color: white;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }

    .page-item.disabled .page-link {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* Newsletter Section */
    .newsletter-section {
      background: var(--gradient-primary);
      padding: 4rem 0;
      color: white;
      position: relative;
      overflow: hidden;
      margin-top: 4rem;
    }

    .newsletter-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.5;
    }

    .newsletter-title {
      font-family: var(--font-secondary);
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1rem;
      position: relative;
      z-index: 1;
    }

    .newsletter-text {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 0;
      position: relative;
      z-index: 1;
    }

    .newsletter-form {
      position: relative;
      z-index: 1;
    }

    .newsletter-form .input-group {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: var(--border-radius-full);
      padding: 0.5rem;
    }

    .newsletter-form .form-control {
      border: none;
      background-color: white;
      border-radius: var(--border-radius-full);
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      color: var(--text-primary);
    }

    .newsletter-form .btn-shop-now {
      border-radius: var(--border-radius-full);
      padding: 0.75rem 1.5rem;
      background: var(--primary-color);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .newsletter-form .btn-shop-now:hover {
      transform: translateY(0);
    }

    /* Toast Notification */
    .toast-container {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 1050;
    }

    .toast {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border: none;
      min-width: 300px;
      overflow: hidden;
    }

    .toast-header {
      background-color: transparent;
      border-bottom: 1px solid var(--border-color);
      padding: 1rem;
    }

    .toast-body {
      padding: 1rem;
      display: flex;
      align-items: center;
    }

    .toast-body i {
      margin-right: 0.75rem;
      font-size: 1.25rem;
    }

    /* Quick View Modal */
    .modal-content {
      background-color: var(--card-bg);
      border: none;
      border-radius: var(--border-radius-lg);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .modal-header {
      border-bottom: 1px solid var(--border-color);
      padding: 1.5rem;
    }

    .modal-title {
      font-weight: 600;
      font-family: var(--font-secondary);
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-fill-color: transparent;
    }

    .modal-body {
      padding: 2rem;
    }

    .btn-close {
      background: transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z'/%3E%3C/svg%3E") center/1em auto no-repeat;
      opacity: 0.5;
      transition: opacity var(--transition-fast);
    }

    .btn-close:hover {
      opacity: 1;
      transform: rotate(90deg);
    }

    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 50px;
      height: 50px;
      background: var(--gradient-primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      transition: all var(--transition-normal);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    .back-to-top.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .back-to-top:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 25px rgba(0, 0, 0, 0.15);
    }

    /* Dark Mode Toggle */
    .dark-mode-toggle {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      width: 50px;
      height: 50px;
      background-color: var(--card-bg);
      color: var(--text-primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      transition: all var(--transition-normal);
      border: none;
    }

    .dark-mode-toggle:hover {
      transform: translateY(-5px) rotate(45deg);
      box-shadow: 0 15px 25px rgba(0, 0, 0, 0.15);
    }

    /* Loading Spinner */
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(59, 130, 246, 0.1);
      border-radius: 50%;
      border-top-color: var(--accent-color);
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    /* Shimmer Effect */
    .shimmer {
      position: relative;
      overflow: hidden;
    }

    .shimmer::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transform: rotate(30deg);
      animation: shimmer 6s infinite;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .product-card:hover .shimmer::after {
      opacity: 1;
    }

    @keyframes shimmer {
      0% {
        transform: translateX(-100%) rotate(30deg);
      }
      100% {
        transform: translateX(100%) rotate(30deg);
      }
    }

    /* Responsive Styles */
    @media (max-width: 991.98px) {
      .hero-title {
        font-size: 2.5rem;
      }

      .filter-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1050;
        padding: 2rem;
        transform: translateX(-100%);
        opacity: 0;
        visibility: hidden;
        border-radius: 0;
        overflow-y: auto;
      }

      .filter-sidebar.show {
        transform: translateX(0);
        opacity: 1;
        visibility: visible;
      }

      body.filter-open {
        overflow: hidden;
      }

      .filter-header {
        margin-bottom: 2rem;
      }

      .search-input, .search-input:focus {
        width: 100%;
      }

      .products-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .products-actions {
        width: 100%;
        justify-content: space-between;
      }

      .search-container {
        flex: 1;
        width: 100%;
      }

      .search-form {
        width: 100%;
      }

      .search-input, .search-input:focus {
        width: 100%;
      }
    }

    @media (max-width: 767.98px) {
      .hero-title {
        font-size: 2rem;
      }

      .hero-subtitle {
        font-size: 1rem;
      }

      .newsletter-section {
        text-align: center;
      }

      .newsletter-title {
        font-size: 1.5rem;
      }

      .newsletter-text {
        font-size: 1rem;
        margin-bottom: 1.5rem;
      }

      .back-to-top, .dark-mode-toggle {
        width: 40px;
        height: 40px;
        font-size: 0.8rem;
      }
    }

    @media (max-width: 575.98px) {
      .product-card {
        margin-bottom: 1.5rem;
      }

      .product-price-rating {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .pagination .page-link {
        width: 35px;
        height: 35px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>
  <!-- Preloader -->
  <div class="preloader">
    <div class="loader"></div>
  </div>

  <!-- Scroll Indicator -->
  <div class="scroll-indicator"></div>

  <!-- Cursor Glow Effect -->
  <div class="cursor-glow"></div>
  
  <script>
    // Set the header background type for the shop page
    document.body.setAttribute('data-header-bg', 'dark');
  </script>
  
  <%- include("../partials/user/header") %>

  <!-- Hero Section -->
  <section class="hero-section" data-aos="fade-in">
    <div class="hero-content">
      <h1 class="hero-title">Discover the Future of Fashion</h1>
      <p class="hero-subtitle">Explore our curated collection of premium designs crafted for the modern lifestyle</p>
    </div>
  </section>

  <!-- Breadcrumb -->
  <div class="container">
    <nav aria-label="breadcrumb" class="custom-breadcrumb" data-aos="fade-up">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/"><i class="fas fa-home"></i> Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Shop</li>
      </ol>
    </nav>
  </div>

  <!-- Main Shop Section -->
  <div class="container shop-container">
    <div class="row">
      <!-- Mobile Filter Toggle -->
      <div class="d-block d-lg-none mb-4" data-aos="fade-up">
        <button class="btn filter-toggle-btn w-100" id="mobileFilterToggle">
          <i class="fas fa-sliders-h me-2"></i> Filters & Categories
        </button>
      </div>

      <!-- Sidebar Filters -->
      <div class="col-lg-3 filter-sidebar" id="filterSidebar" data-aos="fade-right" data-aos-delay="100">
        <div class="filter-header d-flex d-lg-none justify-content-between align-items-center mb-3">
          <h5 class="m-0">Filters</h5>
          <button class="btn-close" id="closeFilter"></button>
        </div>

        <form id="filterForm" action="/filterProducts" method="GET">
          <div class="filter-section">
            <h5 class="filter-title">Refine Selection</h5>

            <div class="filter-group">
              <span class="filter-label">Categories</span>
              <select class="form-select" name="category" id="categorySelect">
                <option value="all">All Categories</option>
                <% categories.forEach(cat => { %>
                  <option value="<%= cat.name %>" <%=(filters && filters.category === cat.name) ? 'selected' : '' %>><%= cat.name %></option>
                <% }); %>
              </select>
            </div>

            <div class="filter-group">
              <span class="filter-label">Size</span>
              <div class="size-options">
                <% ['S', 'M', 'L', 'XL', 'XXL'].forEach(size => { %>
                  <button type="button" class="size-btn <%= (filters && filters.size === size) ? 'active' : '' %>" data-size="<%= size %>"><%= size %></button>
                <% }); %>
              </div>
              <input type="hidden" name="size" id="selectedSize" value="<%= filters ? filters.size : '' %>">
            </div>

            <div class="filter-group">
              <span class="filter-label">Price Range</span>
              <div class="price-inputs">
                <div class="price-input">
                  <input type="number" class="form-control" placeholder="Min" name="minPrice" id="minPrice" value="<%= filters ? filters.minPrice : '' %>">
                </div>
                <div class="price-divider">-</div>
                <div class="price-input">
                  <input type="number" class="form-control" placeholder="Max" name="maxPrice" id="maxPrice" value="<%= filters ? filters.maxPrice : '' %>">
                </div>
              </div>
            </div>

            <div class="filter-actions">
              <button type="button" class="btn btn-shop-now" id="applyFilters">Apply Filters</button>
              <a href="/allproduct" class="btn btn-reset">Reset All</a>
            </div>
          </div>
        </form>
      </div>

      <!-- Products Grid -->
      <div class="col-lg-9 products-container">
        <div class="products-header" data-aos="fade-left" data-aos-delay="100">
          <div class="products-count">
            <h4 id="productCount">Products (<%= totalProducts %>)</h4>
          </div>
          
          <div class="products-actions">
            <div class="search-container">
              <form action="/search" method="GET" class="search-form" id="searchForm">
                <input type="text" name="query" id="searchQuery" placeholder="Search products..." class="search-input" value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>">
                <button type="button" class="search-button" id="searchBtn">
                  <i class="fas fa-search"></i>
                </button>
              </form>
            </div>
            
            <div class="sorting-container">
              <select class="form-select" id="sortOption" name="sort">
                <option value="latest" <%=(filters && filters.sort === 'latest') ? 'selected' : '' %>>New Arrivals</option>
                <option value="price-low-high" <%=(filters && filters.sort === 'price-low-high') ? 'selected' : '' %>>Price: Low to High</option>
                <option value="price-high-low" <%=(filters && filters.sort === 'price-high-low') ? 'selected' : '' %>>Price: High to Low</option>
                <option value="popular" <%=(filters && filters.sort === 'popular') ? 'selected' : '' %>>Most Popular</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Products Grid -->
        <div class="row" id="products-container">
          <% if (products && products.length > 0) { %>
            <% products.forEach((product, index) => { %>
              <div class="col-md-4 col-sm-6 mb-4 product-item" data-aos="fade-up" data-aos-delay="<%= 150 + (index * 50) %>">
                <div class="product-card shimmer">
                  <div class="wishlist-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="wishlist-heart" data-product-id="<%= product._id %>">
                      <path class="heart" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                  </div>
                  <a href="/productdetails/<%= product._id %>" class="product-image-link">
                    <% const mainImage = product.images && product.images.find(img => img.isMain) || (product.images && product.images[0]) || { url: '/placeholder.svg?height=300&width=300&query=fashion+product' }; %>
                    <img src="<%= mainImage.url %>" class="product-image" alt="<%= product.name %>" onerror="this.onerror=null; this.src='/placeholder.svg?height=300&width=300&query=fashion+product';">
                    <% if (product.offer && product.offer > 0) { %>
                      <span class="product-badge"><%= product.offer %>% OFF</span>
                    <% } %>
                    <div class="product-overlay">
                      <span class="quick-view">Quick View</span>
                    </div>
                  </a>
                  <div class="product-info">
                    <h3 class="product-name"><%= product.name %></h3>
                    <div class="product-price-rating">
                      <div class="product-pricing">
                        <% if (product.offer > 0) { %>
                          <span class="product-price">₹<%= (product.salePrice || 0).toFixed(2) %></span>
                          <span class="product-original-price">₹<%= (product.regularPrice || 0).toFixed(2) %></span>
                        <% } else { %>
                          <span class="product-price">₹<%= (product.regularPrice || 0).toFixed(2) %></span>
                        <% } %>
                      </div>
                      <div class="product-rating">
                        <% const rating = product.ratings ? (product.ratings.average || 0) : 0; %>
                        <% for (let star = 1; star <= 5; star++) { %>
                          <% if (star <= Math.floor(rating)) { %>
                            <i class="fas fa-star"></i>
                          <% } else if (star <= Math.ceil(rating) && star > Math.floor(rating)) { %>
                            <i class="fas fa-star-half-alt"></i>
                          <% } else { %>
                            <i class="far fa-star"></i>
                          <% } %>
                        <% } %>
                        <span class="rating-count">(<%= product.ratings ? (product.ratings.count || 0) : 0 %>)</span>
                      </div>
                    </div>
                    <a href="/productdetails/<%= product._id %>" class="btn-view-product">View Product</a>
                  </div>
                </div>
              </div>
            <% }); %>
          <% } else { %>
            <div class="col-12" data-aos="fade-up">
              <div class="no-products">
                <div class="no-products-icon">
                  <i class="fas fa-search"></i>
                </div>
                <h3>No Products Found</h3>
                <p><% if (typeof noProductsMessage !== 'undefined' && noProductsMessage) { %>
                  <%= noProductsMessage %>
                <% } else { %>
                  We couldn't find any products matching your criteria.
                <% } %></p>
                <a href="/allproduct" class="btn btn-shop-now">Clear Filters</a>
              </div>
            </div>
          <% } %>
        </div>

        <!-- Pagination -->
        <% if (totalPages && totalPages > 1) { %>
          <nav aria-label="Page navigation" class="pagination-container" data-aos="fade-up">
            <ul class="pagination" id="pagination">
              <% const buildPageUrl = (pageNum) => {
                const params = new URLSearchParams();
                if (filters) {
                  if (filters.category && filters.category !== 'all') params.append('category', filters.category);
                  if (filters.size) params.append('size', filters.size);
                  if (filters.color) params.append('color', filters.color);
                  if (filters.minPrice) params.append('minPrice', filters.minPrice);
                  if (filters.maxPrice) params.append('maxPrice', filters.maxPrice);
                  if (filters.sort) params.append('sort', filters.sort);
                }
                if (typeof searchQuery !== 'undefined' && searchQuery) {
                  params.append('query', searchQuery);
                }
                params.append('page', pageNum);
                return `/filterProducts?${params.toString()}`;
              } %>

              <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
                <a class="page-link" href="<%= buildPageUrl(currentPage - 1) %>" aria-label="Previous" data-page="<%= currentPage - 1 %>">
                  <i class="fas fa-chevron-left"></i>
                </a>
              </li>

              <% for (let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                  <a class="page-link" href="<%= buildPageUrl(i) %>" data-page="<%= i %>"><%= i %></a>
                </li>
              <% } %>

              <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
                <a class="page-link" href="<%= buildPageUrl(currentPage + 1) %>" aria-label="Next" data-page="<%= currentPage + 1 %>">
                  <i class="fas fa-chevron-right"></i>
                </a>
              </li>
            </ul>
          </nav>
        <% } %>
      </div>
    </div>
  </div>

  <!-- Newsletter Section -->
  <section class="newsletter-section" data-aos="fade-up">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6">
          <h2 class="newsletter-title">Join Our Fashion Community</h2>
          <p class="newsletter-text">Subscribe to receive exclusive offers, early access to new collections, and style inspiration.</p>
        </div>
        <div class="col-lg-6">
          <form class="newsletter-form">
            <div class="input-group">
              <input type="email" class="form-control" placeholder="Your email address" required>
              <button class="btn btn-shop-now" type="submit">Subscribe</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <%- include("../partials/user/footer") %>

  <!-- Toast Notification -->
  <div class="toast-container">
    <div id="wishlistToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto">Notification</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body" id="toastBody"></div>
    </div>
  </div>

  <!-- Quick View Modal -->
  <div class="modal fade" id="quickViewModal" tabindex="-1" aria-labelledby="quickViewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="quickViewModalLabel">Quick View</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-6">
              <img id="quickViewImage" src="/placeholder.svg?height=300&width=300&query=fashion+product" alt="Product Image" class="img-fluid rounded">
            </div>
            <div class="col-md-6">
              <h3 id="quickViewName" class="mb-3"></h3>
              <p id="quickViewPrice" class="product-price mb-3"></p>
              <div id="quickViewRating" class="star-rating mb-3"></div>
              <p id="quickViewDescription" class="mb-4"></p>
              <div class="d-grid">
                <a id="quickViewLink" href="#" class="btn btn-shop-now">View Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Back to Top Button -->
  <div class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </div>

  <!-- Dark Mode Toggle -->
  <div class="dark-mode-toggle" id="darkModeToggle">
    <i class="fas fa-moon"></i>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize AOS
      AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true
      });
      
      // Preloader
      const preloader = document.querySelector('.preloader');
      window.addEventListener('load', () => {
        setTimeout(() => {
          preloader.classList.add('fade-out');
        }, 500);
      });

      // Scroll Indicator
      const scrollIndicator = document.querySelector('.scroll-indicator');
      window.addEventListener('scroll', () => {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        scrollIndicator.style.width = scrolled + '%';
      });

      // Cursor Glow Effect
      const cursorGlow = document.querySelector('.cursor-glow');
      document.addEventListener('mousemove', (e) => {
        cursorGlow.style.left = e.clientX + 'px';
        cursorGlow.style.top = e.clientY + 'px';
      });

      document.addEventListener('mousedown', () => {
        cursorGlow.style.width = '30px';
        cursorGlow.style.height = '30px';
        cursorGlow.style.opacity = '0.8';
      });

      document.addEventListener('mouseup', () => {
        cursorGlow.style.width = '20px';
        cursorGlow.style.height = '20px';
        cursorGlow.style.opacity = '0.5';
      });
      
      const filters = <%- JSON.stringify(filters || { category: 'all', size: '', color: '', minPrice: '', maxPrice: '', sort: 'latest' }) %>;
      let currentPage = <%= currentPage || 1 %>;
      
      // Mobile filter toggle
      const mobileFilterToggle = document.getElementById('mobileFilterToggle');
      const filterSidebar = document.getElementById('filterSidebar');
      const closeFilter = document.getElementById('closeFilter');
      
      if (mobileFilterToggle) {
        mobileFilterToggle.addEventListener('click', function() {
          filterSidebar.classList.add('show');
          document.body.classList.add('filter-open');
        });
      }
      
      if (closeFilter) {
        closeFilter.addEventListener('click', function() {
          filterSidebar.classList.remove('show');
          document.body.classList.remove('filter-open');
        });
      }
      
      // Size selection
      const sizeButtons = document.querySelectorAll('.size-btn');
      const selectedSizeInput = document.getElementById('selectedSize');
      
      sizeButtons.forEach(button => {
        button.addEventListener('click', function() {
          const size = this.getAttribute('data-size');
          
          if (this.classList.contains('active')) {
            // Deselect if already active
            this.classList.remove('active');
            selectedSizeInput.value = '';
          } else {
            // Select new size
            sizeButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            selectedSizeInput.value = size;
          }
        });
      });
      
      // Wishlist functionality
      const wishlistToast = new bootstrap.Toast(document.getElementById('wishlistToast'));
      
      async function loadWishlistState() {
        try {
          const response = await fetch('/wishlist/ids');
          const data = await response.json();
          
          document.querySelectorAll('.wishlist-heart').forEach(heart => {
            const productId = heart.getAttribute('data-product-id');
            if (data.products.includes(productId)) {
              heart.querySelector('.heart').classList.add('active');
            }
          });
        } catch (error) {
          console.error('Error loading wishlist state:', error);
        }
      }
      
      loadWishlistState();
      
      document.querySelectorAll('.wishlist-heart').forEach(heart => {
        heart.addEventListener('click', async function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const productId = this.getAttribute('data-product-id');
          const heartPath = this.querySelector('.heart');
          const isActive = heartPath.classList.contains('active');
          const url = isActive ? '/wishlist/remove' : '/addTowhislist';
          
          try {
            const response = await fetch(url, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ productId: productId }),
            });
            
            const data = await response.json();
            
            const toastBody = document.getElementById('toastBody');
            toastBody.innerHTML = `<i class="${data.success ? 'fas fa-check-circle text-success' : 'fas fa-exclamation-circle text-danger'}"></i> ${data.message}`;
            
            if (data.success) {
              heartPath.classList.toggle('active');
            }
            
            wishlistToast.show();
          } catch (error) {
            console.error('Error:', error);
            const toastBody = document.getElementById('toastBody');
            toastBody.innerHTML = `<i class="fas fa-exclamation-circle text-danger"></i> Operation failed`;
            wishlistToast.show();
          }
        });
      });
      
      // Quick View functionality
      const quickViewModal = new bootstrap.Modal(document.getElementById('quickViewModal'));
      
      document.querySelectorAll('.quick-view').forEach(quickViewBtn => {
        quickViewBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const productCard = this.closest('.product-card');
          const productLink = productCard.querySelector('.product-image-link').getAttribute('href');
          const productImage = productCard.querySelector('.product-image').getAttribute('src');
          const productName = productCard.querySelector('.product-name').textContent;
          const productPrice = productCard.querySelector('.product-price').textContent;
          const productRating = productCard.querySelector('.product-rating').innerHTML;
          
          document.getElementById('quickViewImage').setAttribute('src', productImage);
          document.getElementById('quickViewName').textContent = productName;
          document.getElementById('quickViewPrice').textContent = productPrice;
          document.getElementById('quickViewRating').innerHTML = productRating;
          document.getElementById('quickViewDescription').textContent = 'Premium quality product crafted with the finest materials for the modern lifestyle. This item features exceptional craftsmanship and attention to detail.';
          document.getElementById('quickViewLink').setAttribute('href', productLink);
          
          quickViewModal.show();
        });
      });
      
      // Filter functionality
      const applyFiltersBtn = document.getElementById('applyFilters');
      const categorySelect = document.getElementById('categorySelect');
      const minPriceInput = document.getElementById('minPrice');
      const maxPriceInput = document.getElementById('maxPrice');
      const sortOption = document.getElementById('sortOption');
      const searchBtn = document.getElementById('searchBtn');
      const searchQuery = document.getElementById('searchQuery');
      
      function fetchProducts(isSearch = false) {
        const filterData = {
          category: categorySelect.value,
          size: selectedSizeInput.value,
          minPrice: minPriceInput.value,
          maxPrice: maxPriceInput.value,
          sort: sortOption.value,
          query: searchQuery.value,
          page: currentPage
        };
        
        const queryString = new URLSearchParams(filterData).toString();
        const url = isSearch ? `/search?${queryString}` : `/filterProducts?${queryString}`;
        
        // Show loading state
        document.getElementById('products-container').innerHTML = `
          <div class="col-12 text-center py-5">
            <div class="loading-spinner"></div>
            <p class="mt-3">Loading products...</p>
          </div>
        `;
        
        fetch(url, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
          },
          credentials: 'same-origin'
        })
        .then(response => response.json())
        .then(data => {
          updateProducts(data);
          updatePagination(data);
          
          // Close mobile filter if open
          if (window.innerWidth < 992) {
            filterSidebar.classList.remove('show');
            document.body.classList.remove('filter-open');
          }
          
          // Scroll to products section
          document.querySelector('.products-header').scrollIntoView({ behavior: 'smooth' });
          
          // Update wishlist state
          loadWishlistState();
        })
        .catch(error => {
          console.error('Error fetching products:', error);
          document.getElementById('products-container').innerHTML = `
            <div class="col-12 text-center py-5">
              <div class="alert alert-danger">
                <i class="fas fa-exclamation-circle me-2"></i>
                Error loading products. Please try again.
              </div>
            </div>
          `;
        });
      }
      
      if (applyFiltersBtn) {
        applyFiltersBtn.addEventListener('click', function() {
          currentPage = 1;
          fetchProducts();
        });
      }
      
      if (sortOption) {
        sortOption.addEventListener('change', function() {
          currentPage = 1;
          fetchProducts();
        });
      }
      
      if (searchBtn) {
        searchBtn.addEventListener('click', function() {
          currentPage = 1;
          fetchProducts(true);
        });
      }
      
      if (searchQuery) {
        searchQuery.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            currentPage = 1;
            fetchProducts(true);
          }
        });
      }
      
      // Pagination
      const pagination = document.getElementById('pagination');
      if (pagination) {
        pagination.addEventListener('click', function(e) {
          e.preventDefault();
          const pageLink = e.target.closest('.page-link');
          if (pageLink && !pageLink.parentElement.classList.contains('disabled')) {
            currentPage = parseInt(pageLink.dataset.page);
            fetchProducts(searchQuery.value.trim() !== '');
          }
        });
      }
      
      function updateProducts(data) {
        const productsContainer = document.getElementById('products-container');
        productsContainer.innerHTML = '';
        
        if (data.products && data.products.length > 0) {
          data.products.forEach((product, index) => {
            const mainImage = product.images && product.images.find(img => img.isMain) || 
                             (product.images && product.images[0]) || 
                             { url: '/placeholder.svg?height=300&width=300&query=fashion+product' };
            
            const rating = product.ratings ? (product.ratings.average || 0) : 0;
            let starsHtml = '';
            
            for (let star = 1; star <= 5; star++) {
              if (star <= Math.floor(rating)) {
                starsHtml += '<i class="fas fa-star"></i>';
              } else if (star <= Math.ceil(rating) && star > Math.floor(rating)) {
                starsHtml += '<i class="fas fa-star-half-alt"></i>';
              } else {
                starsHtml += '<i class="far fa-star"></i>';
              }
            }
            
            const pricingHtml = product.offer > 0 
              ? `<span class="product-price">₹${product.salePrice.toFixed(2)}</span>
                 <span class="product-original-price">₹${product.regularPrice.toFixed(2)}</span>`
              : `<span class="product-price">₹${product.regularPrice.toFixed(2)}</span>`;
            
            const badgeHtml = product.offer > 0 
              ? `<span class="product-badge">${product.offer}% OFF</span>` 
              : '';
            
            const productHtml = `
              <div class="col-md-4 col-sm-6 mb-4 product-item" data-aos="fade-up" data-aos-delay="${150 + (index * 50)}">
                <div class="product-card shimmer">
                  <div class="wishlist-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="wishlist-heart" data-product-id="${product._id}">
                      <path class="heart" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                  </div>
                  <a href="/productdetails/${product._id}" class="product-image-link">
                    <img src="${mainImage.url}" class="product-image" alt="${product.name}" onerror="this.onerror=null; this.src='/placeholder.svg?height=300&width=300&query=fashion+product';">
                    ${badgeHtml}
                    <div class="product-overlay">
                      <span class="quick-view">Quick View</span>
                    </div>
                  </a>
                  <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-price-rating">
                      <div class="product-pricing">
                        ${pricingHtml}
                      </div>
                      <div class="product-rating">
                        ${starsHtml}
                        <span class="rating-count">(${product.ratings ? (product.ratings.count || 0) : 0})</span>
                      </div>
                    </div>
                    <a href="/productdetails/${product._id}" class="btn-view-product">View Product</a>
                  </div>
                </div>
              </div>
            `;
            
            productsContainer.insertAdjacentHTML('beforeend', productHtml);
          });
          
          // Reattach event listeners for wishlist buttons
          document.querySelectorAll('.wishlist-heart').forEach(heart => {
            heart.addEventListener('click', async function(e) {
              e.preventDefault();
              e.stopPropagation();
              
              const productId = this.getAttribute('data-product-id');
              const heartPath = this.querySelector('.heart');
              const isActive = heartPath.classList.contains('active');
              const url = isActive ? '/wishlist/remove' : '/addTowhislist';
              
              try {
                const response = await fetch(url, {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify({ productId: productId }),
                });
                
                const data = await response.json();
                
                const toastBody = document.getElementById('toastBody');
                toastBody.innerHTML = `<i class="${data.success ? 'fas fa-check-circle text-success' : 'fas fa-exclamation-circle text-danger'}"></i> ${data.message}`;
                
                if (data.success) {
                  heartPath.classList.toggle('active');
                }
                
                wishlistToast.show();
              } catch (error) {
                console.error('Error:', error);
                const toastBody = document.getElementById('toastBody');
                toastBody.innerHTML = `<i class="fas fa-exclamation-circle text-danger"></i> Operation failed`;
                wishlistToast.show();
              }
            });
          });
          
          // Reattach quick view event listeners
          document.querySelectorAll('.quick-view').forEach(quickViewBtn => {
            quickViewBtn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              
              const productCard = this.closest('.product-card');
              const productLink = productCard.querySelector('.product-image-link').getAttribute('href');
              const productImage = productCard.querySelector('.product-image').getAttribute('src');
              const productName = productCard.querySelector('.product-name').textContent;
              const productPrice = productCard.querySelector('.product-pricing').textContent.trim();
              const productRating = productCard.querySelector('.product-rating').innerHTML;
              
              document.getElementById('quickViewImage').setAttribute('src', productImage);
              document.getElementById('quickViewName').textContent = productName;
              document.getElementById('quickViewPrice').textContent = productPrice;
              document.getElementById('quickViewRating').innerHTML = productRating;
              document.getElementById('quickViewDescription').textContent = 'Premium quality product crafted with the finest materials for the modern lifestyle. This item features exceptional craftsmanship and attention to detail.';
              document.getElementById('quickViewLink').setAttribute('href', productLink);
              
              quickViewModal.show();
            });
          });

          // Initialize AOS for new elements
          AOS.refresh();
        } else {
          productsContainer.innerHTML = `
            <div class="col-12">
              <div class="no-products">
                <div class="no-products-icon">
                  <i class="fas fa-search"></i>
                </div>
                <h3>No Products Found</h3>
                <p>${data.noProductsMessage || 'We couldn\'t find any products matching your criteria.'}</p>
                <a href="/allproduct" class="btn btn-shop-now">Clear Filters</a>
              </div>
            </div>
          `;
        }
        
        document.getElementById('productCount').textContent = `Products (${data.totalProducts})`;
      }
      
      function updatePagination(data) {
        const pagination = document.getElementById('pagination');
        if (!pagination) return;
        
        pagination.innerHTML = '';
        
        if (data.totalPages > 1) {
          pagination.innerHTML += `
            <li class="page-item ${data.currentPage === 1 ? 'disabled' : ''}">
              <a class="page-link" href="#" aria-label="Previous" data-page="${data.currentPage - 1}">
                <i class="fas fa-chevron-left"></i>
              </a>
            </li>
          `;
          
          for (let i = 1; i <= data.totalPages; i++) {
            pagination.innerHTML += `
              <li class="page-item ${data.currentPage === i ? 'active' : ''}">
                <a class="page-link" href="#" data-page="${i}">${i}</a>
              </li>
            `;
          }
          
          pagination.innerHTML += `
            <li class="page-item ${data.currentPage === data.totalPages ? 'disabled' : ''}">
              <a class="page-link" href="#" aria-label="Next" data-page="${data.currentPage + 1}">
                <i class="fas fa-chevron-right"></i>
              </a>
            </li>
          `;
        }
      }
      
      // Back to top button
      const backToTopButton = document.getElementById('backToTop');
      
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopButton.classList.add('show');
        } else {
          backToTopButton.classList.remove('show');
        }
      });
      
      backToTopButton.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
      
      // Dark mode toggle
      const darkModeToggle = document.getElementById('darkModeToggle');
      const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
      
      // Check for saved theme preference or use the system preference
      const savedTheme = localStorage.getItem('theme');
      
      if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
        document.body.classList.add('dark-mode');
        darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      }
      
      darkModeToggle.addEventListener('click', () => {
        if (document.body.classList.contains('dark-mode')) {
          document.body.classList.remove('dark-mode');
          localStorage.setItem('theme', 'light');
          darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        } else {
          document.body.classList.add('dark-mode');
          localStorage.setItem('theme', 'dark');
          darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
      });
      
      // Newsletter form
      const newsletterForm = document.querySelector('.newsletter-form');
      if (newsletterForm) {
        newsletterForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const email = this.querySelector('input[type="email"]').value;
          
          // Show success message
          const toastBody = document.getElementById('toastBody');
          toastBody.innerHTML = `<i class="fas fa-check-circle text-success"></i> Thank you for subscribing with ${email}!`;
          wishlistToast.show();
          
          // Reset form
          this.reset();
        });
      }
    });
  </script>
</body>
</html>
